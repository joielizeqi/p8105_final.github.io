<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Exploratory Data Analysis</title>

<script src="site_libs/header-attrs-2.29/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<script src="site_libs/plotly-binding-4.10.4/plotly.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<link href="site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet" />
<script src="site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>
<link href="site_libs/font-awesome-6.4.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="report.html">Report</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    About
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="team.html">Team</a>
    </li>
    <li>
      <a href="datasource.html">Data source</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="eda.html">Exploratory Data Analysis</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Analyses
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="trends.html">Dog bite incidence trends</a>
    </li>
    <li>
      <a href="correlation.html">Spatial correlations</a>
    </li>
    <li>
      <a href="regression.html">Modeling dog bite incidences</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://zhenkunnfang.shinyapps.io/shiny_app-1/">Shiny</a>
</li>
<li>
  <a href="https://www.youtube.com/">
    <span class="fa fa-youtube-play"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/joielizeqi/p8105_final.github.io.git">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Exploratory Data Analysis</h1>

</div>


<pre class="r"><code>library(tidyverse)
library(knitr)
library(rvest)
library(broom)
library(dplyr)
library(purrr)
library(ggplot2)
library(plotly)
library(readxl)
library(reshape2)
library(akima)
library(wordcloud)
library(tm)</code></pre>
<div id="import-and-tidy-up-data" class="section level1">
<h1>Import and tidy up data</h1>
<pre class="r"><code># NYC zip code
url = &quot;https://p8105.com/data/zip_codes.html&quot;
ny_zip_codes = read_html(url) |&gt;
  html_table() |&gt; 
  data.frame() |&gt; 
  janitor::clean_names() |&gt; 
  mutate(
    borough = factor(
      county,
      levels=c(&quot;Bronx&quot;,&quot;Kings&quot;,&quot;New York&quot;, &quot;Queens&quot;,&quot;Richmond&quot;),
      labels=c(&quot;Bronx&quot;,&quot;Brooklyn&quot;,&quot;Manhattan&quot;,&quot;Queens&quot;,
 &quot;Staten Island&quot;))) 

valid_zipcodes = pull(ny_zip_codes, zip_code)

# Dog bite 
dog_bites_df = read_csv(&quot;data/Dog_Bites_Data.csv&quot;, na = c(&quot;NA&quot;, &quot;&quot;, &quot;.&quot;)) |&gt; 
  janitor::clean_names() |&gt; 
  rename_with(~ gsub(&quot;^x&quot;, &quot;&quot;, .))


dog_bites_clean = dog_bites_df |&gt; 
  mutate(date_of_bite = as.Date(date_of_bite, format = &quot;%B %d %Y&quot;)) |&gt; 
  mutate(year = format(date_of_bite, &quot;%Y&quot;),
         month = format(date_of_bite, &quot;%m&quot;),
         day = format(date_of_bite, &quot;%d&quot;)) |&gt; 
  mutate(year = as.factor(as.numeric(year)),
         month = factor(as.numeric(month), levels = 1:12),
         day = as.factor(as.numeric(day))
         ) |&gt; 
  mutate(breed = str_to_lower(breed)) |&gt; 
  mutate(breed = ifelse(grepl(&quot;mix|mxied|cross|\\s[xX]|-X|/|&amp;|COLLILE,|yorkie poo|yorkie chon|yorkie-poo|yorkipoo|boxer beagle|shi-po|Doberman And Labrador&quot;, breed, ignore.case = TRUE), &quot;Mixed&quot;, breed)) |&gt; 
  mutate(breed = ifelse(grepl(&quot;bull&quot;, breed, ignore.case = TRUE), &quot;Bull&quot;, breed)) |&gt; 
  mutate(breed = ifelse(grepl(&quot;know|KOW|unsure|not given|certain|not sure|unc&quot;, breed, ignore.case = TRUE), &quot;Unknown&quot;, breed)) |&gt; 
  mutate(breed = ifelse(grepl(&quot;poo&quot;, breed, ignore.case = TRUE), &quot;Poodle&quot;, breed)) |&gt; 
  mutate(breed = ifelse(grepl(&quot;vizsla&quot;, breed, ignore.case = TRUE), &quot;Vizsla&quot;, breed)) |&gt; 
  mutate(breed = ifelse(grepl(&quot;shepher|sheherd|shepard|sheep|shpherd|sheperd&quot;, breed, ignore.case = TRUE), &quot;Shepherd&quot;, breed)) |&gt; 
  mutate(breed = ifelse(grepl(&quot;husky&quot;, breed, ignore.case = TRUE), &quot;Husky&quot;, breed)) |&gt; 
  mutate(breed = ifelse(grepl(&quot;chihuahua|chi hua&quot;, breed, ignore.case = TRUE), &quot;Chihuahua&quot;, breed)) |&gt;
  mutate(breed = ifelse(grepl(&quot;collie&quot;, breed, ignore.case = TRUE), &quot;Collie&quot;, breed)) |&gt; 
  mutate(breed = ifelse(grepl(&quot;cattle&quot;, breed, ignore.case = TRUE), &quot;Cattle dog&quot;, breed)) |&gt; 
  mutate(breed = ifelse(grepl(&quot;yorkie|yorkshire&quot;, breed, ignore.case = TRUE), &quot;Yorkshire&quot;, breed)) |&gt; 
  mutate(breed = ifelse(grepl(&quot;schnauzer&quot;, breed, ignore.case = TRUE), &quot;Schnauzer&quot;, breed)) |&gt; 
  mutate(breed = ifelse(grepl(&quot;coonhound&quot;, breed, ignore.case = TRUE), &quot;Coonhound&quot;, breed)) |&gt; 
  mutate(breed = ifelse(grepl(&quot;corgi&quot;, breed, ignore.case = TRUE), &quot;Corgie&quot;, breed)) |&gt; 
  mutate(breed = ifelse(grepl(&quot;dachshund&quot;, breed, ignore.case = TRUE), &quot;Dachshund&quot;, breed)) |&gt; 
  mutate(breed = ifelse(grepl(&quot;beagle&quot;, breed, ignore.case = TRUE), &quot;Beagle&quot;, breed)) |&gt; 
  mutate(breed = ifelse(grepl(&quot;west&quot;, breed, ignore.case = TRUE), &quot;Westie&quot;, breed)) |&gt; 
  mutate(breed = ifelse(grepl(&quot;mastiff&quot;, breed, ignore.case = TRUE), &quot;Mastiff&quot;, breed)) |&gt; 
  mutate(breed = ifelse(grepl(&quot;malti tzu|maltese&quot;, breed, ignore.case = TRUE), &quot;Maltese&quot;, breed)) |&gt; 
  mutate(breed = ifelse(grepl(&quot;shih tzu|Shichon|Shichi&quot;, breed, ignore.case = TRUE), &quot;Shih tzu&quot;, breed)) |&gt; 
  mutate(breed = ifelse(grepl(&quot;parson&quot;, breed, ignore.case = TRUE), &quot;Parson&quot;, breed)) |&gt; 
  mutate(breed = ifelse(grepl(&quot;nova&quot;, breed, ignore.case = TRUE), &quot;Nova Scotia Duck Tolling Retriever&quot;, breed)) |&gt; 
  mutate(breed = ifelse(grepl(&quot;Staffordshire&quot;, breed, ignore.case = TRUE), &quot;Staffordshire&quot;, breed)) |&gt; 
  mutate(breed = ifelse(grepl(&quot;skan mal&quot;, breed, ignore.case = TRUE), &quot;alaskan malamute&quot;, breed)) |&gt; 
  mutate(breed = ifelse(grepl(&quot;russell terr&quot;, breed, ignore.case = TRUE), &quot;russell terrier&quot;, breed)) |&gt; 
  mutate(breed = ifelse(grepl(&quot;shiba&quot;, breed, ignore.case = TRUE), &quot;Shiba&quot;, breed)) |&gt; 
  mutate(breed = ifelse(grepl(&quot;American Terrier&quot;, breed, ignore.case = TRUE), &quot;American Terrier&quot;, breed)) |&gt; 
  mutate(breed = ifelse(grepl(&quot;Golden&quot;, breed, ignore.case = TRUE), &quot;Golden Doodle&quot;, breed)) |&gt;
  mutate(breed = ifelse(grepl(&quot;Springer&quot;, breed, ignore.case = TRUE), &quot;Springer&quot;, breed)) |&gt; 
  mutate(breed = ifelse(grepl(&quot;Catahoula&quot;, breed, ignore.case = TRUE), &quot;Catahoula&quot;, breed)) |&gt; 
  mutate(breed = ifelse(grepl(&quot;Crested&quot;, breed, ignore.case = TRUE), &quot;Crested&quot;, breed)) |&gt; 
  mutate(breed = ifelse(grepl(&quot;Spaniel&quot;, breed, ignore.case = TRUE), &quot;Spaniel&quot;, breed)) |&gt; 
  mutate(breed = ifelse(grepl(&quot;Dandie Dinmont&quot;, breed, ignore.case = TRUE), &quot;Dandie Dinmont&quot;, breed)) |&gt; 
  mutate(breed = ifelse(grepl(&quot;Pug&quot;, breed, ignore.case = TRUE), &quot;Puggle&quot;, breed)) |&gt; 
  mutate(breed = ifelse(grepl(&quot;Potcake&quot;, breed, ignore.case = TRUE), &quot;Potcake&quot;, breed)) |&gt; 
  mutate(breed = ifelse(grepl(&quot;Border Terrier&quot;, breed, ignore.case = TRUE), &quot;Border Terrier&quot;, breed)) |&gt; 
  mutate(breed = ifelse(grepl(&quot;Blue He&quot;, breed, ignore.case = TRUE), &quot;Blue Heeler&quot;, breed)) |&gt; 
  mutate(breed = ifelse(grepl(&quot;Bernedoodle&quot;, breed, ignore.case = TRUE), &quot;Bernadoodle&quot;, breed)) |&gt; 
  mutate(breed = ifelse(grepl(&quot;ne Corso&quot;, breed, ignore.case = TRUE), &quot;Caine Corso&quot;, breed)) |&gt; 
  mutate(breed = ifelse(grepl(&quot;ton De Tulear&quot;, breed, ignore.case = TRUE), &quot;Cotton De Tulear&quot;, breed)) |&gt; 
  mutate(breed = ifelse(grepl(&quot;Daschound|Daschund|Dachshund&quot;, breed, ignore.case = TRUE), &quot;Daschund&quot;, breed)) |&gt; 
  mutate(breed = ifelse(grepl(&quot;Pomsk&quot;, breed, ignore.case = TRUE), &quot;Pomski&quot;, breed)) |&gt; 
  mutate(breed = ifelse(grepl(&quot;Miniature Labradoodle&quot;, breed, ignore.case = TRUE), &quot;Mini Labordoodle&quot;, breed)) |&gt; 
  mutate(breed = ifelse(grepl(&quot;Miniature Pinscher&quot;, breed, ignore.case = TRUE), &quot;Mini Pincher&quot;, breed)) |&gt; 
  mutate(breed = ifelse(grepl(&quot;Wheaten Terrier|wheaton&quot;, breed, ignore.case = TRUE), &quot;Wheaton Terrier&quot;, breed)) |&gt;
  mutate(breed = ifelse(grepl(&quot;Retriever&quot;, breed, ignore.case = TRUE), &quot;Retreiver&quot;, breed)) |&gt;
  mutate(breed = ifelse(grepl(&quot;Dogue De Bord&quot;, breed, ignore.case = TRUE), &quot;Dogue De Bordeaux&quot;, breed)) |&gt;
  mutate(breed = ifelse(grepl(&quot;Medium&quot;, breed, ignore.case = TRUE), &quot;Medium&quot;, breed)) |&gt;
  mutate(breed = ifelse(grepl(&quot;small&quot;, breed, ignore.case = TRUE), &quot;small&quot;, breed)) |&gt;
  mutate(breed = ifelse(grepl(&quot;Wolfhound&quot;, breed, ignore.case = TRUE), &quot;Wolfhound&quot;, breed)) |&gt;
  mutate(breed = ifelse(grepl(&quot;Terrier&quot;, breed, ignore.case = TRUE), &quot;Terrier&quot;, breed)) |&gt;
  mutate(breed = ifelse(grepl(&quot;small&quot;, breed, ignore.case = TRUE), &quot;small&quot;, breed)) |&gt;
  mutate(breed = str_to_title(breed))

dog_licensing_df = read_csv(&quot;data/NYC_Dog_Licensing_Dataset.csv&quot;, na = c(&quot;NA&quot;, &quot;&quot;, &quot;.&quot;)) |&gt; 
  janitor::clean_names() |&gt; 
  rename_with(~ gsub(&quot;^x&quot;, &quot;&quot;, .))</code></pre>
<p>This project used three datasets: NYC zip code data, NYC dog bite
incidences data, and NYC dog licensing data. The NYC zip code dataset
was obtained from the P8105 course website; the NYC dog bite incidences
dataset was obtained from NYC Open Data; the NYC dog licensing dataset
was obtained from the DOHMH Dog Licensing System.</p>
<p>In our exploratory data analysis below, we will examine how dog bite
incidences are distributed by different variables in our data, including
breed, gender, neuter status, borough, time, and license status.</p>
</div>
<div id="dog-bites-by-breeds" class="section level1">
<h1>Dog bites by breeds</h1>
<pre class="r"><code>top_breeds = dog_bites_clean |&gt; 
  group_by(breed) |&gt; 
  summarise(count = n()) |&gt; 
  arrange(desc(count)) |&gt; 
  filter(!is.na(breed) &amp; breed != &quot;unknown&quot;) |&gt; 
  slice_head(n = 10)

top_breed_inter = plot_ly(
  data = top_breeds,
  labels = ~breed,
  values = ~count,
  type = &#39;pie&#39;,
  textinfo = &#39;label+percent&#39;,
  hoverinfo = &#39;label+value+percent&#39;,
  marker = list(line = list(color = &#39;#FFFFFF&#39;, width = 2))
) |&gt;
  layout(
    title = &quot;Top 10 Breeds Involved in Bite Count&quot;,
    xaxis = list(showgrid = FALSE, zeroline = FALSE, showticklabels = FALSE),
    yaxis = list(showgrid = FALSE, zeroline = FALSE, showticklabels = FALSE)
  )

top_breed_inter</code></pre>
<div class="plotly html-widget html-fill-item" id="htmlwidget-5a552d9256426e24b74f" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-5a552d9256426e24b74f">{"x":{"visdat":{"fbca133d5726":["function () ","plotlyVisDat"]},"cur_data":"fbca133d5726","attrs":{"fbca133d5726":{"labels":{},"values":{},"textinfo":"label+percent","hoverinfo":"label+value+percent","marker":{"line":{"color":"#FFFFFF","width":2}},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"pie"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Top 10 Breeds Involved in Bite Count","xaxis":{"showgrid":false,"zeroline":false,"showticklabels":false},"yaxis":{"showgrid":false,"zeroline":false,"showticklabels":false},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"labels":["Mixed","Bull","Unknown","Shepherd","Shih Tzu","Chihuahua","Yorkshire","Poodle","Terrier","Maltese"],"values":[5167,4760,2425,825,735,648,488,476,402,376],"textinfo":"label+percent","hoverinfo":["label+value+percent","label+value+percent","label+value+percent","label+value+percent","label+value+percent","label+value+percent","label+value+percent","label+value+percent","label+value+percent","label+value+percent"],"marker":{"color":"rgba(31,119,180,1)","line":{"color":"#FFFFFF","width":2}},"type":"pie","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>The top 10 dog breeds that contributed to the most dog bite
incidences are shown in the pie chart above. Pit bulls are involved in
the most dog bite incidences, with a leading proportion of 45.3%, which
is almost half of the incidences recorded in New York City. Shih Tzu is
the second most frequent breed in these incidences (8.27%), followed by
Chihuahua (7.31%) and other breeds.</p>
<p>In the pie chart, we notice that 5.88% of incidences were attributed
to the American pit bull mix and 5.77% were attributed to the American
pit bull terriers. Since the specific ancestry information for these
dogs were not documented, it is unclear whether they are more related to
the pit bull breed or the mixed breed. If they were to be classified as
pit bulls, the pit bull category would make up an even bigger proportion
of total dog bite incidences than it does now.</p>
<pre class="r"><code>breeds &lt;- dog_bites_clean |&gt; 
  filter(breed != &quot;unknown&quot;) |&gt; 
  drop_na(breed) |&gt; 
  pull(breed)

breeds &lt;- tolower(breeds)

breed_text &lt;- paste(breeds, collapse = &quot; &quot;)

breed_source &lt;- VectorSource(breed_text)
breed_corpus &lt;- Corpus(breed_source)
breed_tdm &lt;- TermDocumentMatrix(breed_corpus)

breed_matrix &lt;- as.matrix(breed_tdm)
breed_freq &lt;- sort(rowSums(breed_matrix), decreasing = TRUE)</code></pre>
<pre class="r"><code>set.seed(1234)
wordcloud(
  names(breed_freq), 
  freq = breed_freq, 
  scale = c(4, 0.5),  
  max.words = 200,  
  colors = brewer.pal(8, &quot;Dark2&quot;)  
)</code></pre>
<p><img src="eda_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>COMMENT</p>
</div>
<div id="dog-bites-by-gender-and-neuter-status" class="section level1">
<h1>Dog bites by gender and neuter status</h1>
<pre class="r"><code>gender_spay_plot = ggplot(dog_bites_clean, aes(x = gender, fill = spay_neuter)) +
  geom_bar(position = &quot;dodge&quot;) +
  theme_minimal() +
  labs(title = &quot;Dog Bites by Gender and Spay/Neuter Status&quot;,
       x = &quot;Gender&quot;,
       y = &quot;Count of Dog Bites&quot;,
       fill = &quot;Spay/Neuter Status&quot;) +
  scale_fill_brewer(palette = &quot;Set1&quot;) +
  theme(plot.title = element_text(hjust = 0.5, size = 15))

# Display the static plot
gender_spay_plot_inter = ggplotly(gender_spay_plot)
gender_spay_plot_inter</code></pre>
<div class="plotly html-widget html-fill-item" id="htmlwidget-d56ec844f1a8bd648861" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-d56ec844f1a8bd648861">{"x":{"data":[{"orientation":"v","width":[0.44999999999999996,0.45000000000000018,0.45000000000000018],"base":[0,0,0],"x":[0.77500000000000002,1.7749999999999999,2.7749999999999999],"y":[1667,4653,10467],"text":["count:  1667<br />gender: F<br />spay_neuter: FALSE","count:  4653<br />gender: M<br />spay_neuter: FALSE","count: 10467<br />gender: U<br />spay_neuter: FALSE"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(228,26,28,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"FALSE","legendgroup":"FALSE","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.45000000000000018,0.45000000000000018,0.45000000000000018],"base":[0,0,0],"x":[1.2250000000000001,2.2250000000000001,3.2250000000000001],"y":[1722,4086,68],"text":["count:  1722<br />gender: F<br />spay_neuter:  TRUE","count:  4086<br />gender: M<br />spay_neuter:  TRUE","count:    68<br />gender: U<br />spay_neuter:  TRUE"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(55,126,184,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"TRUE","legendgroup":"TRUE","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":46.153590701535919,"r":7.3059360730593621,"b":40.182648401826498,"l":54.794520547945211},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"Dog Bites by Gender and Spay/Neuter Status","font":{"color":"rgba(0,0,0,1)","family":"","size":19.925280199252807},"x":0.5,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.40000000000000002,3.6000000000000001],"tickmode":"array","ticktext":["F","M","U"],"tickvals":[1,2,3],"categoryorder":"array","categoryarray":["F","M","U"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"Gender","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-523.35000000000002,10990.35],"tickmode":"array","ticktext":["0","2500","5000","7500","10000"],"tickvals":[0,2500,5000,7500,10000],"categoryorder":"array","categoryarray":["0","2500","5000","7500","10000"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"Count of Dog Bites","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"title":{"text":"Spay/Neuter Status","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"fbca56318d0d":{"x":{},"fill":{},"type":"bar"}},"cur_data":"fbca56318d0d","visdat":{"fbca56318d0d":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>Across dog bite data with known genders, dog bite incidences appeared
more than twice as frequent for male dogs compared to female dogs, for
both neutered and un-neutered dogs. Comparing their neutered status,
there is only a slight difference in dog bite incidences between the
neutered and un-neutered groups. Neutered female dogs contributed to
slightly more dog bite incidences than un-neitered female dogs, while
un-neutered male dogs contributed to slightly more dog bite
incidences.</p>
<p>It is worth noting that a significant portion of dog bite data had
missing data for the dogs’ gender, and that among the unknown gender
group, most dogs appeared to be neutered. The amount of missing
information in these two variables could be leading us to an incomplete
analysis of how dog bites were associated with gender and neuter
status.</p>
</div>
<div id="dog-bites-by-borough" class="section level1">
<h1>Dog bites by borough</h1>
<pre class="r"><code>ggplot(dog_bites_clean, aes(x = borough)) +
  geom_bar(fill = &quot;skyblue&quot;) +
  theme_minimal() +
  labs(title = &quot;Distribution of Dog Bites by Borough&quot;,
       x = &quot;Borough&quot;,
       y = &quot;Count of Dog Bites&quot;)</code></pre>
<p><img src="eda_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>COMMENT</p>
</div>
<div id="dog-bites-by-time" class="section level1">
<h1>Dog bites by time</h1>
<pre class="r"><code>bites_by_year_month = dog_bites_clean |&gt;
  count(year, month, name = &quot;Bite_Count&quot;) |&gt; 
  mutate(hover_text = paste(&quot;Year:&quot;, year, &quot;&lt;br&gt;Month:&quot;, month, &quot;&lt;br&gt;Count:&quot;, Bite_Count))</code></pre>
<pre class="r"><code>heatmap_interactive = plot_ly(
  data = bites_by_year_month,
  x = ~month,
  y = ~year,
  z = ~Bite_Count,
  type = &quot;heatmap&quot;,
  colors = c(&quot;white&quot;, &quot;red&quot;),
  text = ~hover_text,
  hoverinfo = &quot;text&quot;
) |&gt;
  layout(
    title = &quot;Dog Bites by Month &amp; Year&quot;,
    xaxis = list(title = &quot;Month&quot;),
    yaxis = list(title = &quot;Year&quot;),
    colorbar = list(title = &quot;Count for Dog Bites&quot;)
  )

heatmap_interactive</code></pre>
<div class="plotly html-widget html-fill-item" id="htmlwidget-ddc1c89821a7be8553c5" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-ddc1c89821a7be8553c5">{"x":{"visdat":{"fbca495b49b4":["function () ","plotlyVisDat"]},"cur_data":"fbca495b49b4","attrs":{"fbca495b49b4":{"x":{},"y":{},"z":{},"text":{},"hoverinfo":"text","colors":["white","red"],"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"heatmap"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Dog Bites by Month & Year","xaxis":{"domain":[0,1],"automargin":true,"title":"Month","type":"category","categoryorder":"array","categoryarray":["1","2","3","4","5","6","7","8","9","10","11","12"]},"yaxis":{"domain":[0,1],"automargin":true,"title":"Year","type":"category","categoryorder":"array","categoryarray":["2015","2016","2017","2018","2019","2020","2021"]},"colorbar":{"title":"Count for Dog Bites"},"scene":{"zaxis":{"title":"Bite_Count"}},"hovermode":"closest","showlegend":false,"legend":{"yanchor":"top","y":0.5}},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"colorbar":{"title":"Bite_Count","ticklen":2,"len":0.5,"lenmode":"fraction","y":1,"yanchor":"top"},"colorscale":[["0","rgba(255,255,255,1)"],["0.0416666666666667","rgba(255,247,244,1)"],["0.0833333333333333","rgba(255,239,233,1)"],["0.125","rgba(255,231,222,1)"],["0.166666666666667","rgba(255,223,212,1)"],["0.208333333333333","rgba(255,215,201,1)"],["0.25","rgba(255,207,191,1)"],["0.291666666666667","rgba(255,199,180,1)"],["0.333333333333333","rgba(255,191,170,1)"],["0.375","rgba(255,183,160,1)"],["0.416666666666667","rgba(255,175,149,1)"],["0.458333333333333","rgba(255,166,139,1)"],["0.5","rgba(255,158,129,1)"],["0.541666666666667","rgba(255,149,119,1)"],["0.583333333333333","rgba(255,141,109,1)"],["0.625","rgba(255,132,100,1)"],["0.666666666666667","rgba(255,123,90,1)"],["0.708333333333333","rgba(255,113,80,1)"],["0.75","rgba(255,104,70,1)"],["0.791666666666667","rgba(255,93,60,1)"],["0.833333333333333","rgba(255,82,50,1)"],["0.875","rgba(255,70,40,1)"],["0.916666666666667","rgba(255,56,29,1)"],["0.958333333333333","rgba(255,37,16,1)"],["1","rgba(255,0,0,1)"]],"showscale":true,"x":["1","2","3","4","5","6","7","8","9","10","11","12","1","2","3","4","5","6","7","8","9","10","11","12","1","2","3","4","5","6","7","8","9","10","11","12","1","2","3","4","5","6","7","8","9","10","11","12","1","2","3","4","5","6","7","8","9","10","11","12","1","2","3","4","5","6","7","8","9","10","11","12","1","2","3","4","5","6","7","8","9","10","11","12"],"y":["2015","2015","2015","2015","2015","2015","2015","2015","2015","2015","2015","2015","2016","2016","2016","2016","2016","2016","2016","2016","2016","2016","2016","2016","2017","2017","2017","2017","2017","2017","2017","2017","2017","2017","2017","2017","2018","2018","2018","2018","2018","2018","2018","2018","2018","2018","2018","2018","2019","2019","2019","2019","2019","2019","2019","2019","2019","2019","2019","2019","2020","2020","2020","2020","2020","2020","2020","2020","2020","2020","2020","2020","2021","2021","2021","2021","2021","2021","2021","2021","2021","2021","2021","2021"],"z":[201,206,241,304,368,351,378,374,303,258,288,285,243,206,228,308,313,280,297,333,294,250,239,221,214,239,254,286,306,367,394,357,328,281,242,243,224,201,260,256,329,401,392,340,288,257,220,209,200,215,253,331,343,373,347,346,315,295,274,242,244,242,186,110,185,223,235,268,240,233,199,186,151,172,212,257,296,315,321,298,221,227,256,195],"text":["Year: 2015 <br>Month: 1 <br>Count: 201","Year: 2015 <br>Month: 2 <br>Count: 206","Year: 2015 <br>Month: 3 <br>Count: 241","Year: 2015 <br>Month: 4 <br>Count: 304","Year: 2015 <br>Month: 5 <br>Count: 368","Year: 2015 <br>Month: 6 <br>Count: 351","Year: 2015 <br>Month: 7 <br>Count: 378","Year: 2015 <br>Month: 8 <br>Count: 374","Year: 2015 <br>Month: 9 <br>Count: 303","Year: 2015 <br>Month: 10 <br>Count: 258","Year: 2015 <br>Month: 11 <br>Count: 288","Year: 2015 <br>Month: 12 <br>Count: 285","Year: 2016 <br>Month: 1 <br>Count: 243","Year: 2016 <br>Month: 2 <br>Count: 206","Year: 2016 <br>Month: 3 <br>Count: 228","Year: 2016 <br>Month: 4 <br>Count: 308","Year: 2016 <br>Month: 5 <br>Count: 313","Year: 2016 <br>Month: 6 <br>Count: 280","Year: 2016 <br>Month: 7 <br>Count: 297","Year: 2016 <br>Month: 8 <br>Count: 333","Year: 2016 <br>Month: 9 <br>Count: 294","Year: 2016 <br>Month: 10 <br>Count: 250","Year: 2016 <br>Month: 11 <br>Count: 239","Year: 2016 <br>Month: 12 <br>Count: 221","Year: 2017 <br>Month: 1 <br>Count: 214","Year: 2017 <br>Month: 2 <br>Count: 239","Year: 2017 <br>Month: 3 <br>Count: 254","Year: 2017 <br>Month: 4 <br>Count: 286","Year: 2017 <br>Month: 5 <br>Count: 306","Year: 2017 <br>Month: 6 <br>Count: 367","Year: 2017 <br>Month: 7 <br>Count: 394","Year: 2017 <br>Month: 8 <br>Count: 357","Year: 2017 <br>Month: 9 <br>Count: 328","Year: 2017 <br>Month: 10 <br>Count: 281","Year: 2017 <br>Month: 11 <br>Count: 242","Year: 2017 <br>Month: 12 <br>Count: 243","Year: 2018 <br>Month: 1 <br>Count: 224","Year: 2018 <br>Month: 2 <br>Count: 201","Year: 2018 <br>Month: 3 <br>Count: 260","Year: 2018 <br>Month: 4 <br>Count: 256","Year: 2018 <br>Month: 5 <br>Count: 329","Year: 2018 <br>Month: 6 <br>Count: 401","Year: 2018 <br>Month: 7 <br>Count: 392","Year: 2018 <br>Month: 8 <br>Count: 340","Year: 2018 <br>Month: 9 <br>Count: 288","Year: 2018 <br>Month: 10 <br>Count: 257","Year: 2018 <br>Month: 11 <br>Count: 220","Year: 2018 <br>Month: 12 <br>Count: 209","Year: 2019 <br>Month: 1 <br>Count: 200","Year: 2019 <br>Month: 2 <br>Count: 215","Year: 2019 <br>Month: 3 <br>Count: 253","Year: 2019 <br>Month: 4 <br>Count: 331","Year: 2019 <br>Month: 5 <br>Count: 343","Year: 2019 <br>Month: 6 <br>Count: 373","Year: 2019 <br>Month: 7 <br>Count: 347","Year: 2019 <br>Month: 8 <br>Count: 346","Year: 2019 <br>Month: 9 <br>Count: 315","Year: 2019 <br>Month: 10 <br>Count: 295","Year: 2019 <br>Month: 11 <br>Count: 274","Year: 2019 <br>Month: 12 <br>Count: 242","Year: 2020 <br>Month: 1 <br>Count: 244","Year: 2020 <br>Month: 2 <br>Count: 242","Year: 2020 <br>Month: 3 <br>Count: 186","Year: 2020 <br>Month: 4 <br>Count: 110","Year: 2020 <br>Month: 5 <br>Count: 185","Year: 2020 <br>Month: 6 <br>Count: 223","Year: 2020 <br>Month: 7 <br>Count: 235","Year: 2020 <br>Month: 8 <br>Count: 268","Year: 2020 <br>Month: 9 <br>Count: 240","Year: 2020 <br>Month: 10 <br>Count: 233","Year: 2020 <br>Month: 11 <br>Count: 199","Year: 2020 <br>Month: 12 <br>Count: 186","Year: 2021 <br>Month: 1 <br>Count: 151","Year: 2021 <br>Month: 2 <br>Count: 172","Year: 2021 <br>Month: 3 <br>Count: 212","Year: 2021 <br>Month: 4 <br>Count: 257","Year: 2021 <br>Month: 5 <br>Count: 296","Year: 2021 <br>Month: 6 <br>Count: 315","Year: 2021 <br>Month: 7 <br>Count: 321","Year: 2021 <br>Month: 8 <br>Count: 298","Year: 2021 <br>Month: 9 <br>Count: 221","Year: 2021 <br>Month: 10 <br>Count: 227","Year: 2021 <br>Month: 11 <br>Count: 256","Year: 2021 <br>Month: 12 <br>Count: 195"],"hoverinfo":"text","type":"heatmap","xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>COmment</p>
</div>
<div id="dog-bites-by-licensing-data" class="section level1">
<h1>Dog bites by licensing data</h1>
<pre class="r"><code>breed_counts &lt;- dog_licensing_df |&gt;
  mutate(breed_name = tolower(breed_name)) |&gt; 
  filter(!is.na(breed_name), breed_name != &quot;unknown&quot;) |&gt;
  count(breed_name, name = &quot;count&quot;) |&gt;  
  arrange(desc(count)) 

set.seed(1234)  
wordcloud(words = breed_counts$breed_name, 
          freq = breed_counts$count, 
          min.freq = 1, 
          max.words = 200, 
          random.order = FALSE, 
          rot.per = 0.35, 
          colors = brewer.pal(8, &quot;Dark2&quot;))</code></pre>
<p><img src="eda_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<p>COMMENT</p>
<pre class="r"><code>ny_zip_codes_filtered = ny_zip_codes |&gt; 
  select(zip_code, borough)

license_borough = dog_licensing_df |&gt; 
  filter(zip_code %in% valid_zipcodes) |&gt; 
  merge( ny_zip_codes_filtered, by = &quot;zip_code&quot;, all.x = TRUE)

bites_by_borough = dog_bites_clean |&gt;
  group_by(borough) |&gt;
  summarise(Bite_Count = n())

licenses_by_borough = license_borough |&gt;
  group_by(borough) |&gt;
  summarise(License_Count = n())


borough_data = merge(bites_by_borough, licenses_by_borough, by = &quot;borough&quot;, all = TRUE) |&gt; 
  drop_na()

borough_data_long = borough_data |&gt;
  pivot_longer(cols = c(&quot;License_Count&quot;, &quot;Bite_Count&quot;),
               names_to = &quot;Count_Type&quot;,
               values_to = &quot;Count&quot;)</code></pre>
<pre class="r"><code>borough_grouped_bar_plot = ggplot(borough_data_long, aes(x = borough, y = Count, fill = Count_Type)) +
  geom_bar(stat = &quot;identity&quot;, position = position_dodge(width = 0.7), width = 0.6) +
  scale_fill_manual(name = &quot;Count Type&quot;, values = c(&quot;License_Count&quot; = &quot;skyblue&quot;, &quot;Bite_Count&quot; = &quot;orange&quot;),
                    labels = c(&quot;License_Count&quot; = &quot;Licenses&quot;, &quot;Bite_Count&quot; = &quot;Bites&quot;)) +
  labs(title = &quot;Dog Licenses and Bites by Borough&quot;, x = &quot;Borough&quot;, y = &quot;Count&quot;) +
  theme_minimal() +
  theme(plot.title = element_text(hjust = 0.5, size = 15))

borough_interactive = ggplotly(borough_grouped_bar_plot)
borough_interactive</code></pre>
<div class="plotly html-widget html-fill-item" id="htmlwidget-910c036a31f34e35ba68" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-910c036a31f34e35ba68">{"x":{"data":[{"orientation":"v","width":[0.30000000000000004,0.29999999999999982,0.29999999999999982,0.29999999999999982,0.29999999999999893],"base":[0,0,0,0,0],"x":[0.82499999999999996,1.825,2.8250000000000002,3.8250000000000002,4.8250000000000002],"y":[3782,4985,5270,5773,1872],"text":["borough: Bronx<br />Count:   3782<br />Count_Type: Bite_Count","borough: Brooklyn<br />Count:   4985<br />Count_Type: Bite_Count","borough: Manhattan<br />Count:   5270<br />Count_Type: Bite_Count","borough: Queens<br />Count:   5773<br />Count_Type: Bite_Count","borough: Staten Island<br />Count:   1872<br />Count_Type: Bite_Count"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(255,165,0,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"Bite_Count","legendgroup":"Bite_Count","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":[0.30000000000000027,0.29999999999999982,0.29999999999999982,0.29999999999999893,0.29999999999999893],"base":[0,0,0,0,0],"x":[1.175,2.1749999999999998,3.1749999999999998,4.1749999999999998,5.1749999999999998],"y":[52627,135596,182398,104288,44477],"text":["borough: Bronx<br />Count:  52627<br />Count_Type: License_Count","borough: Brooklyn<br />Count: 135596<br />Count_Type: License_Count","borough: Manhattan<br />Count: 182398<br />Count_Type: License_Count","borough: Queens<br />Count: 104288<br />Count_Type: License_Count","borough: Staten Island<br />Count:  44477<br />Count_Type: License_Count"],"type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(135,206,235,1)","line":{"width":1.8897637795275593,"color":"transparent"}},"name":"License_Count","legendgroup":"License_Count","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":46.153590701535919,"r":7.3059360730593621,"b":40.182648401826498,"l":60.639269406392714},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"Dog Licenses and Bites by Borough","font":{"color":"rgba(0,0,0,1)","family":"","size":19.925280199252807},"x":0.5,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.40000000000000002,5.5999999999999996],"tickmode":"array","ticktext":["Bronx","Brooklyn","Manhattan","Queens","Staten Island"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["Bronx","Brooklyn","Manhattan","Queens","Staten Island"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"Borough","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-9119.8999999999996,191517.89999999999],"tickmode":"array","ticktext":["0","50000","100000","150000"],"tickvals":[0,50000,100000.00000000001,150000],"categoryorder":"array","categoryarray":["0","50000","100000","150000"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"Count","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"title":{"text":"Count Type","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"fbca151d0a05":{"x":{},"y":{},"fill":{},"type":"bar"}},"cur_data":"fbca151d0a05","visdat":{"fbca151d0a05":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>COMMENT</p>
<pre class="r"><code>bite_borough_data = borough_data |&gt;
  mutate(Bite_Percentage = Bite_Count / sum(Bite_Count) * 100,
         Bite_Label = paste0(borough, &quot; (&quot;, round(Bite_Percentage, 1), &quot;%)&quot;))

bite_pie_interactive = plot_ly(
  data = bite_borough_data,
  labels = ~borough,
  values = ~Bite_Count,
  type = &#39;pie&#39;,
  textinfo = &#39;label+percent&#39;,
  hoverinfo = &#39;label+value+percent&#39;,
  title = &quot;Dog Bites by Borough&quot;,
  domain = list(x = c(0, 0.3)), 
  marker = list(colors = RColorBrewer::brewer.pal(n = length(bite_borough_data$borough), name = &quot;Set3&quot;))
) 

license_pie_data = borough_data |&gt;
  mutate(License_Percentage = License_Count / sum(License_Count) * 100,
         License_Label = paste0(borough, &quot; (&quot;, round(License_Percentage, 1), &quot;%)&quot;))

license_pie_interactive = plot_ly(
  data = license_pie_data,
  labels = ~borough,
  values = ~License_Count,
  type = &#39;pie&#39;,
  textinfo = &#39;label+percent&#39;,
  hoverinfo = &#39;label+value+percent&#39;,
  title = &quot;Dog Licenses by Borough&quot;,
  domain = list(x = c(0.35, 0.65)),
  marker = list(colors = RColorBrewer::brewer.pal(n = length(license_pie_data$borough), name = &quot;Set3&quot;))
) 

rate_borough_data = borough_data |&gt;
  mutate(Bite_to_License_Ratio = Bite_Count / License_Count,
         Ratio_Percentage = Bite_to_License_Ratio / sum(Bite_to_License_Ratio) * 100,
         Ratio_Label = paste0(borough, &quot; (&quot;, round(Ratio_Percentage, 1), &quot;%)&quot;))

ratio_pie_interactive = plot_ly(
  data = rate_borough_data,
  labels = ~borough,
  values = ~Bite_to_License_Ratio,
  type = &#39;pie&#39;,
  textinfo = &#39;label+percent&#39;,
  hoverinfo = &#39;label+value+percent&#39;,
  title = &quot;Ratio of Bites to Licenses by Borough&quot;,
  domain = list(x = c(0.7, 1)), 
  marker = list(colors = RColorBrewer::brewer.pal(n = length(rate_borough_data$borough), name = &quot;Set3&quot;))
) </code></pre>
<pre class="r"><code>combined_pies = subplot(
  bite_pie_interactive, 
  license_pie_interactive, 
  ratio_pie_interactive,
  nrows = 1 
)

combined_pies</code></pre>
<div class="plotly html-widget html-fill-item" id="htmlwidget-1a8e721cb893c55255b1" style="width:672px;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-1a8e721cb893c55255b1">{"x":{"data":[{"labels":["Bronx","Brooklyn","Manhattan","Queens","Staten Island"],"values":[3782,4985,5270,5773,1872],"textinfo":"label+percent","hoverinfo":["label+value+percent","label+value+percent","label+value+percent","label+value+percent","label+value+percent"],"title":"Dog Bites by Borough","domain":{"x":[0,0.29999999999999999]},"marker":{"color":"rgba(31,119,180,1)","colors":["#8DD3C7","#FFFFB3","#BEBADA","#FB8072","#80B1D3"],"line":{"color":"rgba(255,255,255,1)"}},"type":"pie","frame":null},{"labels":["Bronx","Brooklyn","Manhattan","Queens","Staten Island"],"values":[52627,135596,182398,104288,44477],"textinfo":"label+percent","hoverinfo":["label+value+percent","label+value+percent","label+value+percent","label+value+percent","label+value+percent"],"title":"Dog Licenses by Borough","domain":{"x":[0.34999999999999998,0.65000000000000002]},"marker":{"color":"rgba(255,127,14,1)","colors":["#8DD3C7","#FFFFB3","#BEBADA","#FB8072","#80B1D3"],"line":{"color":"rgba(255,255,255,1)"}},"type":"pie","frame":null},{"labels":["Bronx","Brooklyn","Manhattan","Queens","Staten Island"],"values":[0.071864252189940525,0.036763621345762415,0.02889286066733188,0.055356320957348881,0.042089169683207049],"textinfo":"label+percent","hoverinfo":["label+value+percent","label+value+percent","label+value+percent","label+value+percent","label+value+percent"],"title":"Ratio of Bites to Licenses by Borough","domain":{"x":[0.69999999999999996,1]},"marker":{"color":"rgba(44,160,44,1)","colors":["#8DD3C7","#FFFFB3","#BEBADA","#FB8072","#80B1D3"],"line":{"color":"rgba(255,255,255,1)"}},"type":"pie","frame":null}],"layout":{"NA":{"anchor":[],"domain":[0,1]},"NA2":{"anchor":[],"domain":[0,1]},"NA3":{"anchor":[],"domain":[0,1]},"margin":{"b":40,"l":60,"t":25,"r":10},"hovermode":"closest","showlegend":true},"attrs":{"fbca1dfedc8":{"labels":{},"values":{},"textinfo":"label+percent","hoverinfo":"label+value+percent","title":"Dog Bites by Borough","domain":{"x":[0,0.29999999999999999]},"marker":{"colors":["#8DD3C7","#FFFFB3","#BEBADA","#FB8072","#80B1D3"]},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"pie"},"fbca1473e66e":{"labels":{},"values":{},"textinfo":"label+percent","hoverinfo":"label+value+percent","title":"Dog Licenses by Borough","domain":{"x":[0.34999999999999998,0.65000000000000002]},"marker":{"colors":["#8DD3C7","#FFFFB3","#BEBADA","#FB8072","#80B1D3"]},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"pie"},"fbca451d4a3f":{"labels":{},"values":{},"textinfo":"label+percent","hoverinfo":"label+value+percent","title":"Ratio of Bites to Licenses by Borough","domain":{"x":[0.69999999999999996,1]},"marker":{"colors":["#8DD3C7","#FFFFB3","#BEBADA","#FB8072","#80B1D3"]},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"pie"}},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"subplot":true,"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>COMMENT</p>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
